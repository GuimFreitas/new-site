webpackJsonp([1],{"./custom-apps/tasks-sheet/components/SheetContainer/Filters/ExportDropdown.jsx":function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a("./node_modules/babel-runtime/helpers/classCallCheck.js"),n=s(o),r=a("./node_modules/babel-runtime/helpers/createClass.js"),i=s(r),l=a("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),u=s(l),d=a("./node_modules/babel-runtime/helpers/inherits.js"),c=s(d),p=a("./node_modules/react/react.js"),m=s(p),_=a("./app/future/components/ui/Dropdown/index.jsx"),f=Teambox.Helpers.t,h=function(e){function t(){var e,a,s,o;(0,n.default)(this,t);for(var r=arguments.length,i=Array(r),l=0;l<r;l++)i[l]=arguments[l];return a=s=(0,u.default)(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),s.exportToXlsx=function(){return s.props.exportReport("xlsx")},s.exportToCsv=function(){return s.props.exportReport("csv")},o=a,(0,u.default)(s,o)}return(0,c.default)(t,e),(0,i.default)(t,[{key:"render",value:function(){return m.default.createElement(_.Dropdown,{name:""+f("custom_apps.sheets.export.text"),"data-qa-component":window.__DEBUG&&window.__DEBUG.qa&&"custom-apps/tasks-sheet/components/SheetContainer/Filters/ExportDropdown"},m.default.createElement(_.Option,{onClick:this.exportToCsv,"data-qa-component":window.__DEBUG&&window.__DEBUG.qa&&"custom-apps/tasks-sheet/components/SheetContainer/Filters/ExportDropdown"},f("custom_apps.sheets.export.csv")),m.default.createElement(_.Option,{onClick:this.exportToXlsx,"data-qa-component":window.__DEBUG&&window.__DEBUG.qa&&"custom-apps/tasks-sheet/components/SheetContainer/Filters/ExportDropdown"},f("custom_apps.sheets.export.xlsx")))}}]),t}(p.Component);h.propTypes={exportReport:m.default.PropTypes.object.isRequired},t.default=h,e.exports=t.default},"./custom-apps/tasks-sheet/components/SheetContainer/Filters/TagsFilter/NoOrgState.jsx":function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a("./node_modules/babel-runtime/helpers/classCallCheck.js"),n=s(o),r=a("./node_modules/babel-runtime/helpers/createClass.js"),i=s(r),l=a("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),u=s(l),d=a("./node_modules/babel-runtime/helpers/inherits.js"),c=s(d),p=a("./node_modules/react/react.js"),m=s(p),_=Teambox.Helpers.t,f=function(e){function t(){return(0,n.default)(this,t),(0,u.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,c.default)(t,e),(0,i.default)(t,[{key:"componentDidMount",value:function(){$(this.domRef).tooltip({title:_("custom_apps.sheets.tags_selector.no_org"),moveArrow:!0,container:"body",placement:"bottom",trigger:"hover"}).data("tooltip").tip()}},{key:"componentWillUnmount",value:function(){$(this.domRef).tooltip("destroy")}},{key:"render",value:function(){var e=this;return m.default.createElement("div",{ref:function(t){return e.domRef=t},"data-qa-component":window.__DEBUG&&window.__DEBUG.qa&&"custom-apps/tasks-sheet/components/SheetContainer/Filters/TagsFilter/NoOrgState"},_("custom_apps.sheets.tags_selector.placeholder"))}}]),t}(p.Component);t.default=f,e.exports=t.default},"./custom-apps/tasks-sheet/components/SheetContainer/Filters/TagsFilter/index.jsx":function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a("./node_modules/babel-runtime/helpers/classCallCheck.js"),n=s(o),r=a("./node_modules/babel-runtime/helpers/createClass.js"),i=s(r),l=a("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),u=s(l),d=a("./node_modules/babel-runtime/helpers/inherits.js"),c=s(d),p=a("./node_modules/react/react.js"),m=s(p),f=a("./app/future/lib/class-name-builder/index.js"),h=s(f),g=a("./app/future/components/Tags/TagSelector/index.jsx"),b=s(g),v=a("./app/future/components/I18n/Translation.jsx"),x=s(v),w=a("./custom-apps/tasks-sheet/components/SheetContainer/Filters/TagsFilter/NoOrgState.jsx"),j=s(w),k=a("./custom-apps/tasks-sheet/components/SheetContainer/Filters/TagsFilter/styles/index.scss"),y=s(k),C=Teambox.Helpers.t,T=function(e){function t(){var e,a,s,o;(0,n.default)(this,t);for(var r=arguments.length,i=Array(r),l=0;l<r;l++)i[l]=arguments[l];return a=s=(0,u.default)(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),s.renderClosedState=function(){if(0===s.props.tagIds.length)return m.default.createElement("span",{"data-qa-component":window.__DEBUG&&window.__DEBUG.qa&&"custom-apps/tasks-sheet/components/SheetContainer/Filters/TagsFilter"},C("custom_apps.sheets.tags_selector.placeholder"));var e=s.props.tagIds.length;return m.default.createElement(x.default,{text:"custom_apps.sheets.tags_selector.filtering",pluralize:{num:e},"data-qa-component":window.__DEBUG&&window.__DEBUG.qa&&"custom-apps/tasks-sheet/components/SheetContainer/Filters/TagsFilter"},m.default.createElement("strong",{placeholder:"count","data-qa-component":window.__DEBUG&&window.__DEBUG.qa&&"custom-apps/tasks-sheet/components/SheetContainer/Filters/TagsFilter"},e))},o=a,(0,u.default)(s,o)}return(0,c.default)(t,e),(0,i.default)(t,[{key:"renderSelector",value:function(){var e=this.props,t=e.organizationId,a=e.tagIds,s=e.onChangeTags;return m.default.createElement(b.default,{inline:!1,type:"Task",onToggleActive:_.noop,onUpdate:function(e,t){return s({value:e,remove:t})},tagIds:a,organizationId:t,renderClosedState:this.renderClosedState,shouldShowIcon:!1,"data-qa-component":window.__DEBUG&&window.__DEBUG.qa&&"custom-apps/tasks-sheet/components/SheetContainer/Filters/TagsFilter"})}},{key:"render",value:function(){var e=this.props.organizationId;return m.default.createElement("div",{className:(0,h.default)(y.default.container,!e&&y.default.container_disabled),"data-qa-component":window.__DEBUG&&window.__DEBUG.qa&&"custom-apps/tasks-sheet/components/SheetContainer/Filters/TagsFilter"},m.default.createElement("label",{"data-qa-component":window.__DEBUG&&window.__DEBUG.qa&&"custom-apps/tasks-sheet/components/SheetContainer/Filters/TagsFilter"},C("custom_apps.sheets.tags_selector.label")),m.default.createElement("div",{className:"Select","data-qa-component":window.__DEBUG&&window.__DEBUG.qa&&"custom-apps/tasks-sheet/components/SheetContainer/Filters/TagsFilter"},m.default.createElement("div",{className:"Select-control "+y.default.filter,"data-qa-component":window.__DEBUG&&window.__DEBUG.qa&&"custom-apps/tasks-sheet/components/SheetContainer/Filters/TagsFilter"},e?this.renderSelector():m.default.createElement(j.default,{"data-qa-component":window.__DEBUG&&window.__DEBUG.qa&&"custom-apps/tasks-sheet/components/SheetContainer/Filters/TagsFilter"}))))}}]),t}(p.Component);T.propTypes={tagIds:m.default.PropTypes.arrayOf(m.default.PropTypes.number).isRequired,organizationId:m.default.PropTypes.number.isRequired,onChangeTags:m.default.PropTypes.func.isRequired},t.default=T,e.exports=t.default},"./custom-apps/tasks-sheet/components/SheetContainer/Filters/TagsFilter/styles/index.scss":function(e,t,a){var s=a('./node_modules/css-loader/index.js?{"modules":true,"localIdentName":"[local]___[hash:base64:5]","importLoaders":2}!./node_modules/postcss-loader/lib/index.js!./node_modules/sass-loader/lib/loader.js?{"outputStyle":"expanded","sourceComments":true}!./custom-apps/tasks-sheet/components/SheetContainer/Filters/TagsFilter/styles/index.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;a("./node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"./custom-apps/tasks-sheet/components/SheetContainer/Filters/index.jsx":function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a("./node_modules/babel-runtime/helpers/defineProperty.js"),n=s(o),r=a("./node_modules/babel-runtime/helpers/toConsumableArray.js"),i=s(r),l=a("./node_modules/babel-runtime/helpers/classCallCheck.js"),u=s(l),d=a("./node_modules/babel-runtime/helpers/createClass.js"),c=s(d),p=a("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),m=s(p),f=a("./node_modules/babel-runtime/helpers/inherits.js"),h=s(f),g=a("./node_modules/react/react.js"),b=s(g),v=a("./node_modules/react-redux/lib/index.js"),x=a("./node_modules/reselect/lib/index.js"),w=a("./app/future/components/LabeledSelector/index.jsx"),j=s(w),k=a("./custom-apps/tasks-sheet/components/SheetContainer/Filters/styles/index.scss"),y=s(k),C=a("./custom-apps/tasks-sheet/components/SheetContainer/Filters/selectors/index.js"),T=a("./custom-apps/tasks-sheet/components/SheetContainer/Filters/ExportDropdown.jsx"),S=s(T),D=a("./custom-apps/tasks-sheet/components/SheetContainer/Filters/TagsFilter/index.jsx"),E=s(D),q=Teambox.Helpers.t,P=[{label:q("custom_apps.sheets.status_selector.active"),value:"open"},{label:q("custom_apps.sheets.status_selector.resolved"),value:"resolved"}],B=[{label:q("custom_apps.sheets.assignee_selector.unassigned"),value:"unassigned"}],R=function(e){function t(){var e,a,s,o;(0,u.default)(this,t);for(var r=arguments.length,l=Array(r),d=0;d<r;d++)l[d]=arguments[d];return a=s=(0,m.default)(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),s.onChangeOrganization=function(e){var t=e.value;s.triggerParamChange("organization_id",t),s.triggerParamChange("project_id",null),s.triggerParamChange("assigned_user_id",null),s.triggerParamChange("user_id",null),s.triggerParamChange("tag_ids",null)},s.onChangeParam=function(e){return function(t){var a=t.value;return s.triggerParamChange(e,a)}},s.tagsParamToArray=function(){return _.compact((s.props.filters.tag_ids||"").split(",")).map(Number)},s.onChangeTags=function(e){var t=e.value,a=e.remove,o=t,n=s.tagsParamToArray(),r=void 0;r=a?_.without(n,Number(o)):[].concat((0,i.default)(n),[o]),s.triggerParamChange("tag_ids",r.join(","))},s.triggerParamChange=function(e,t){s.props.onChangeParams((0,n.default)({},e,t))},s.totalRowsText=function(){return q(Teambox.Features.task_overview_status_filter?"custom_apps.sheets.total_rows.tasks":"custom_apps.sheets.total_rows.active_tasks")},o=a,(0,m.default)(s,o)}return(0,h.default)(t,e),(0,c.default)(t,[{key:"renderFilter",value:function(e){var t=e.onChange,a=e.param,s=e.i18nKey,o=e.options,n=e.extraOptions,r=void 0===n?[]:n,l=e.searchable,u=void 0===l||l,d=e.clearable,c=void 0!==d&&d,p=e.isAvailable;return void 0===p||p?b.default.createElement(j.default,{searchable:u,clearable:c,onChange:t||this.onChangeParam(a),selectorLabel:q("custom_apps.sheets."+s+".label"),resetValue:{value:0},value:this.props.filters[a]||0,options:[{label:q("custom_apps.sheets."+s+".placeholder"),value:0}].concat((0,i.default)(r),(0,i.default)(o)),"data-qa-component":window.__DEBUG&&window.__DEBUG.qa&&"custom-apps/tasks-sheet/components/SheetContainer/Filters"}):null}},{key:"renderExportDropdown",value:function(){return Teambox.Features.task_overview_export?b.default.createElement("div",{className:y.default.exportWrapper,"data-qa-component":window.__DEBUG&&window.__DEBUG.qa&&"custom-apps/tasks-sheet/components/SheetContainer/Filters"},b.default.createElement("span",{"data-qa-component":window.__DEBUG&&window.__DEBUG.qa&&"custom-apps/tasks-sheet/components/SheetContainer/Filters"}," | "),b.default.createElement(S.default,{exportReport:this.props.exportReport,"data-qa-component":window.__DEBUG&&window.__DEBUG.qa&&"custom-apps/tasks-sheet/components/SheetContainer/Filters"})):null}},{key:"render",value:function(){var e=this.props.organizationsFilterOptions.length>1;return b.default.createElement("div",{className:y.default.filters,"data-qa-component":window.__DEBUG&&window.__DEBUG.qa&&"custom-apps/tasks-sheet/components/SheetContainer/Filters"},b.default.createElement("div",{className:y.default.filtersRow,"data-qa-component":window.__DEBUG&&window.__DEBUG.qa&&"custom-apps/tasks-sheet/components/SheetContainer/Filters"},this.renderFilter({param:"organization_id",i18nKey:"organization_selector",onChange:this.onChangeOrganization,options:this.props.organizationsFilterOptions,isAvailable:e}),this.renderFilter({param:"project_id",i18nKey:"workspace_selector",options:this.props.projectsFilterOptions}),this.renderFilter({param:"status",i18nKey:"status_selector",searchable:!1,options:P,isAvailable:Teambox.Features.task_overview_status_filter})),b.default.createElement("div",{className:y.default.filtersRow,"data-qa-component":window.__DEBUG&&window.__DEBUG.qa&&"custom-apps/tasks-sheet/components/SheetContainer/Filters"},this.renderFilter({param:"assigned_user_id",i18nKey:"assignee_selector",extraOptions:B,options:this.props.usersFilterOptions}),this.renderFilter({param:"user_id",i18nKey:"creator_selector",options:this.props.usersFilterOptions,isAvailable:Teambox.Features.task_overview_advanced_filters}),b.default.createElement(E.default,{organizationId:e?this.props.filters.organization_id:Teambox.Data.organizations.first().id,tagIds:this.tagsParamToArray(),onChangeTags:this.onChangeTags,"data-qa-component":window.__DEBUG&&window.__DEBUG.qa&&"custom-apps/tasks-sheet/components/SheetContainer/Filters"})),b.default.createElement("div",{className:y.default.rightFilters,"data-qa-component":window.__DEBUG&&window.__DEBUG.qa&&"custom-apps/tasks-sheet/components/SheetContainer/Filters"},this.props.totalRows+" "+this.totalRowsText(),this.renderExportDropdown()))}}]),t}(g.Component),U=(0,x.createSelector)(C.usersFilterOptionsSelector,C.organizationsFilterOptionsSelector,C.projectsFilterOptionsSelector,function(e,t,a){return{usersFilterOptions:e.usersFilterOptions,organizationsFilterOptions:t.organizationsFilterOptions,projectsFilterOptions:a.projectsFilterOptions}});R.propTypes={exportReport:b.default.PropTypes.object.isRequired,onChangeParams:b.default.PropTypes.object.isRequired,usersFilterOptions:b.default.PropTypes.arrayOf(b.default.PropTypes.object).isRequired,organizationsFilterOptions:b.default.PropTypes.arrayOf(b.default.PropTypes.object).isRequired,projectsFilterOptions:b.default.PropTypes.arrayOf(b.default.PropTypes.object).isRequired,totalRows:b.default.PropTypes.number.isRequired,filters:b.default.PropTypes.object.isRequired},t.default=(0,v.connect)(U)(R),e.exports=t.default},"./custom-apps/tasks-sheet/components/SheetContainer/Filters/selectors/index.js":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.usersFilterOptionsSelector=t.projectsFilterOptionsSelector=t.organizationsFilterOptionsSelector=void 0;var s=a("./node_modules/reselect/lib/index.js"),o=function(e){return e.name},n=function(e){var t=e.id;return{label:e.name,value:t}},r=function(e){return function(t){return!e||t.organization_id===e}};t.organizationsFilterOptionsSelector=(0,s.createSelector)([function(e){return e.organizations}],function(e){return{organizationsFilterOptions:_.chain(e.entities).sortBy(o).map(n).value()}}),t.projectsFilterOptionsSelector=(0,s.createSelector)([function(e,t){return t.organizationId},function(e){return e.projects}],function(e,t){return{projectsFilterOptions:_.chain(t.entities).filter(r(e)).sortBy(o).map(n).value()}}),t.usersFilterOptionsSelector=(0,s.createSelector)([function(e,t){return t.organizationId},function(e){return e.memberships},function(e){return e.users}],function(e,t,a){var s=_.chain(t.entities).filter(r(e)).map(function(e){return e.user_id}).uniq().value(),i=_.compact(_.map(s,function(e){return a.by_id[e]}));return{usersFilterOptions:_.chain(i).filter(function(e){return!e.deleted}).sortBy(o).map(n).value()}})},"./custom-apps/tasks-sheet/components/SheetContainer/Filters/styles/index.scss":function(e,t,a){var s=a('./node_modules/css-loader/index.js?{"modules":true,"localIdentName":"[local]___[hash:base64:5]","importLoaders":2}!./node_modules/postcss-loader/lib/index.js!./node_modules/sass-loader/lib/loader.js?{"outputStyle":"expanded","sourceComments":true}!./custom-apps/tasks-sheet/components/SheetContainer/Filters/styles/index.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;a("./node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"./custom-apps/tasks-sheet/components/SheetContainer/Table/Cell/Creator.jsx":function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.cellData,a=e.dataKey;return l.default.createElement("div",(0,r.default)({},(0,d.default)({selector:a}),{"data-qa-component":window.__DEBUG&&window.__DEBUG.qa&&"custom-apps/tasks-sheet/components/SheetContainer/Table/Cell/Creator"}),l.default.createElement(p.default,{userIds:[t],limit:1,"data-qa-component":window.__DEBUG&&window.__DEBUG.qa&&"custom-apps/tasks-sheet/components/SheetContainer/Table/Cell/Creator"}))}Object.defineProperty(t,"__esModule",{value:!0});var n=a("./node_modules/babel-runtime/helpers/extends.js"),r=s(n),i=a("./node_modules/react/react.js"),l=s(i),u=a("./app/future/lib/metadata_builder/index.js"),d=s(u),c=a("./app/future/components/UserStack/index.jsx"),p=s(c);o.propTypes={cellData:l.default.PropTypes.object.isRequired,dataKey:l.default.PropTypes.string.isRequired},t.default=o,e.exports=t.default},"./custom-apps/tasks-sheet/components/SheetContainer/Table/Cell/Date.jsx":function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.cellData,a=e.dataKey,s=(0,d.default)({selector:a});if(null===t)return l.default.createElement("span",(0,r.default)({},s,{"data-qa-component":window.__DEBUG&&window.__DEBUG.qa&&"custom-apps/tasks-sheet/components/SheetContainer/Table/Cell/Date"}),"-");var o=Teambox.Config.Vars.api_date_format,n=_.local(t,o),i=(0,c.isOverdueDate)(t),u=i?"text-color-red":"";return l.default.createElement("span",(0,r.default)({},s,{title:t,className:u,"data-qa-component":window.__DEBUG&&window.__DEBUG.qa&&"custom-apps/tasks-sheet/components/SheetContainer/Table/Cell/Date"}),n.formatDate())}Object.defineProperty(t,"__esModule",{value:!0});var n=a("./node_modules/babel-runtime/helpers/extends.js"),r=s(n),i=a("./node_modules/react/react.js"),l=s(i),u=a("./app/future/lib/metadata_builder/index.js"),d=s(u),c=a("./app/future/lib/moment-utils/index.js");o.propTypes={cellData:l.default.PropTypes.object.isRequired,dataKey:l.default.PropTypes.string.isRequired},t.default=o,e.exports=t.default},"./custom-apps/tasks-sheet/components/SheetContainer/Table/Cell/List.jsx":function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return{task_list:e.task_lists.by_id[t.cellData]}}function n(e){var t=e.cellData,a=e.dataKey;return u.default.createElement("div",(0,i.default)({},(0,p.default)({selector:a}),{"data-qa-component":window.__DEBUG&&window.__DEBUG.qa&&"custom-apps/tasks-sheet/components/SheetContainer/Table/Cell/List"}),u.default.createElement(f,{cellData:t,"data-qa-component":window.__DEBUG&&window.__DEBUG.qa&&"custom-apps/tasks-sheet/components/SheetContainer/Table/Cell/List"}))}Object.defineProperty(t,"__esModule",{value:!0});var r=a("./node_modules/babel-runtime/helpers/extends.js"),i=s(r),l=a("./node_modules/react/react.js"),u=s(l),d=a("./node_modules/react-redux/lib/index.js"),c=a("./app/future/lib/metadata_builder/index.js"),p=s(c),m=a("./app/future/lib/presenters/shared.js"),_=function(e){var t=e.task_list,a=t?(0,m.publicName)(t):"-";return u.default.createElement("span",{title:a,"data-qa-component":window.__DEBUG&&window.__DEBUG.qa&&"custom-apps/tasks-sheet/components/SheetContainer/Table/Cell/List"},a)};_.propTypes={task_list:u.default.PropTypes.object.isRequired};var f=(0,d.connect)(o)(_);n.propTypes={cellData:u.default.PropTypes.object.isRequired,dataKey:u.default.PropTypes.string.isRequired},t.default=n,e.exports=t.default},"./custom-apps/tasks-sheet/components/SheetContainer/Table/Cell/Project.jsx":function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return{project:e.projects.by_id[t.cellData]}}function n(e){var t=e.cellData,a=e.dataKey;return u.default.createElement("div",(0,i.default)({},(0,p.default)({selector:a}),{"data-qa-component":window.__DEBUG&&window.__DEBUG.qa&&"custom-apps/tasks-sheet/components/SheetContainer/Table/Cell/Project"}),u.default.createElement(f,{cellData:t,"data-qa-component":window.__DEBUG&&window.__DEBUG.qa&&"custom-apps/tasks-sheet/components/SheetContainer/Table/Cell/Project"}))}Object.defineProperty(t,"__esModule",{value:!0});var r=a("./node_modules/babel-runtime/helpers/extends.js"),i=s(r),l=a("./node_modules/react/react.js"),u=s(l),d=a("./node_modules/react-redux/lib/index.js"),c=a("./app/future/lib/metadata_builder/index.js"),p=s(c),m=a("./app/future/lib/presenters/project.js"),_=function(e){var t=e.project,a=(0,m.publicName)(t);return u.default.createElement("span",{title:a,"data-qa-component":window.__DEBUG&&window.__DEBUG.qa&&"custom-apps/tasks-sheet/components/SheetContainer/Table/Cell/Project"},a)};_.propTypes={project:u.default.PropTypes.object.isRequired};var f=(0,d.connect)(o)(_);n.propTypes={cellData:u.default.PropTypes.object.isRequired,dataKey:u.default.PropTypes.string.isRequired},t.default=n,e.exports=t.default},"./custom-apps/tasks-sheet/components/SheetContainer/Table/Cell/Status.jsx":function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.cellData,a=e.dataKey,s="resolved"===t,o=s?"resolved":"active",n=(0,d.default)("tag","tag--{no-border,fw-normal}",s&&"tag--is-resolved");return l.default.createElement("span",(0,r.default)({},(0,p.default)({selector:a}),{className:n,title:o,"data-qa-component":window.__DEBUG&&window.__DEBUG.qa&&"custom-apps/tasks-sheet/components/SheetContainer/Table/Cell/Status"}),o)}Object.defineProperty(t,"__esModule",{value:!0});var n=a("./node_modules/babel-runtime/helpers/extends.js"),r=s(n),i=a("./node_modules/react/react.js"),l=s(i),u=a("./app/future/lib/class-name-builder/index.js"),d=s(u),c=a("./app/future/lib/metadata_builder/index.js"),p=s(c);o.propTypes={cellData:l.default.PropTypes.object.isRequired,dataKey:l.default.PropTypes.string.isRequired},t.default=o,e.exports=t.default},"./custom-apps/tasks-sheet/components/SheetContainer/Table/Cell/Task.jsx":function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.cellData,a=e.dataKey,s=e.rowData;return l.default.createElement("div",(0,r.default)({},(0,p.default)({selector:a}),{title:name,"data-qa-component":window.__DEBUG&&window.__DEBUG.qa&&"custom-apps/tasks-sheet/components/SheetContainer/Table/Cell/Task"}),f(!!s.urgent),t,l.default.createElement("div",{className:_.default.tagsWrapper,"data-qa-component":window.__DEBUG&&window.__DEBUG.qa&&"custom-apps/tasks-sheet/components/SheetContainer/Table/Cell/Task"},l.default.createElement(h,{id:s.id,"data-qa-component":window.__DEBUG&&window.__DEBUG.qa&&"custom-apps/tasks-sheet/components/SheetContainer/Table/Cell/Task"})))}Object.defineProperty(t,"__esModule",{value:!0});var n=a("./node_modules/babel-runtime/helpers/extends.js"),r=s(n),i=a("./node_modules/react/react.js"),l=s(i),u=a("./app/future/components/Tags/TagList/index.jsx"),d=s(u),c=a("./app/future/lib/metadata_builder/index.js"),p=s(c),m=a("./custom-apps/tasks-sheet/components/SheetContainer/Table/styles/index.scss"),_=s(m),f=function(e){return e?l.default.createElement("div",{className:_.default.urgentWrapper,"data-qa-component":window.__DEBUG&&window.__DEBUG.qa&&"custom-apps/tasks-sheet/components/SheetContainer/Table/Cell/Task"},l.default.createElement("i",{title:"Urgent",className:"button-icon icon-tb-urgent text-color-red","data-qa-component":window.__DEBUG&&window.__DEBUG.qa&&"custom-apps/tasks-sheet/components/SheetContainer/Table/Cell/Task"})):null},h=function(e){var t=e.id;return l.default.createElement(d.default,{type:"Task",id:t,width:440,"data-qa-component":window.__DEBUG&&window.__DEBUG.qa&&"custom-apps/tasks-sheet/components/SheetContainer/Table/Cell/Task"})};h.propTypes={id:l.default.PropTypes.number.isRequired},o.propTypes={cellData:l.default.PropTypes.object.isRequired,dataKey:l.default.PropTypes.string.isRequired,rowData:l.default.PropTypes.object.isRequired},t.default=o,e.exports=t.default},"./custom-apps/tasks-sheet/components/SheetContainer/Table/Cell/Timestamp.jsx":function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.cellData,a=e.dataKey;if(null===t)return"";var s=_.utc(t,c),o=s.format("YYYY-MM-DD HH:mm");return l.default.createElement("span",(0,r.default)({},(0,d.default)({selector:a}),{title:o,"data-qa-component":window.__DEBUG&&window.__DEBUG.qa&&"custom-apps/tasks-sheet/components/SheetContainer/Table/Cell/Timestamp"}),s.formatDate())}Object.defineProperty(t,"__esModule",{value:!0});var n=a("./node_modules/babel-runtime/helpers/extends.js"),r=s(n),i=a("./node_modules/react/react.js"),l=s(i),u=a("./app/future/lib/metadata_builder/index.js"),d=s(u),c=Teambox.Config.Vars.api_datetime_unix_format;o.propTypes={cellData:l.default.PropTypes.object.isRequired,dataKey:l.default.PropTypes.string.isRequired},t.default=o,e.exports=t.default},"./custom-apps/tasks-sheet/components/SheetContainer/Table/Cell/Users.jsx":function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.cellData,a=e.dataKey,s=(0,p.default)({selector:a});return null===t?d.default.createElement("span",(0,r.default)({},s,{"data-qa-component":window.__DEBUG&&window.__DEBUG.qa&&"custom-apps/tasks-sheet/components/SheetContainer/Table/Cell/Users"}),"-"):d.default.createElement("div",(0,r.default)({},s,{"data-qa-component":window.__DEBUG&&window.__DEBUG.qa&&"custom-apps/tasks-sheet/components/SheetContainer/Table/Cell/Users"}),d.default.createElement(l.default,{userIds:t,limit:3,"data-qa-component":window.__DEBUG&&window.__DEBUG.qa&&"custom-apps/tasks-sheet/components/SheetContainer/Table/Cell/Users"}))}Object.defineProperty(t,"__esModule",{value:!0});var n=a("./node_modules/babel-runtime/helpers/extends.js"),r=s(n),i=a("./app/future/components/UserStack/index.jsx"),l=s(i),u=a("./node_modules/react/react.js"),d=s(u),c=a("./app/future/lib/metadata_builder/index.js"),p=s(c);o.propTypes={cellData:d.default.PropTypes.object.isRequired,dataKey:d.default.PropTypes.string.isRequired},t.default=o,e.exports=t.default},"./custom-apps/tasks-sheet/components/SheetContainer/Table/index.jsx":function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a("./node_modules/babel-runtime/helpers/extends.js"),n=s(o),r=a("./node_modules/react/react.js"),i=s(r),l=a("./node_modules/react-virtualized/dist/es/index.js"),u=a("./app/future/lib/class-name-builder/index.js"),d=s(u),c=a("./app/future/components/maybeRender.jsx"),p=s(c),m=a("./custom-apps/tasks-sheet/components/SheetContainer/Table/Cell/Timestamp.jsx"),f=s(m),h=a("./custom-apps/tasks-sheet/components/SheetContainer/Table/Cell/Date.jsx"),g=s(h),b=a("./custom-apps/tasks-sheet/components/SheetContainer/Table/Cell/Users.jsx"),v=s(b),x=a("./custom-apps/tasks-sheet/components/SheetContainer/Table/Cell/Creator.jsx"),w=s(x),j=a("./custom-apps/tasks-sheet/components/SheetContainer/Table/Cell/Project.jsx"),k=s(j),y=a("./custom-apps/tasks-sheet/components/SheetContainer/Table/Cell/List.jsx"),C=s(y),T=a("./custom-apps/tasks-sheet/components/SheetContainer/Table/Cell/Status.jsx"),S=s(T),D=a("./custom-apps/tasks-sheet/components/SheetContainer/Table/Cell/Task.jsx"),E=s(D),q=a("./custom-apps/tasks-sheet/components/SheetContainer/Table/styles/index.scss"),P=s(q),B={project_id:k.default,task_list_id:C.default,status:S.default,assigned_user_ids:v.default,user_id:w.default,due_on:g.default,start_on:g.default,updated_at:f.default,created_at:f.default,name:E.default};t.default=i.default.createClass({displayName:"Table",propTypes:{sortDirection:i.default.PropTypes.string.isRequired,fetchNextPage:i.default.PropTypes.func.isRequired,onClickTask:i.default.PropTypes.func.isRequired,onSort:i.default.PropTypes.func.isRequired,sortBy:i.default.PropTypes.string.isRequired,totalRows:i.default.PropTypes.number.isRequired,columns:i.default.PropTypes.array.isRequired,tasks:i.default.PropTypes.array.isRequired},getInitialState:function(){return{loading:!1}},onRowClick:function(e){var t=e.index,a=this.rowGetter({index:t});this.props.onClickTask(_.result(a,"id"))},onSort:function(e){var t=e.sortBy;if(this.isSortable(t))return this.props.onSort({sortBy:t})},isSortable:function(e){return!!Teambox.Features.task_overview_advanced_sorting||"updated_at"===e},headerRenderer:function(e){var t=e.label,a=e.dataKey,s=this.isSortable(a),o=a===this.props.sortBy;return i.default.createElement("div",{className:(0,d.default)(P.default.customHeader,s&&P.default.sortable,o&&P.default.isSorting),"data-qa-component":window.__DEBUG&&window.__DEBUG.qa&&"custom-apps/tasks-sheet/components/SheetContainer/Table"},t,(0,p.default)(s,i.default.createElement("i",{className:P.default.iconSort+" "+this.sortIcon(o,this.props.sortDirection),"data-qa-component":window.__DEBUG&&window.__DEBUG.qa&&"custom-apps/tasks-sheet/components/SheetContainer/Table"})))},sortIcon:function(e,t){return e?"ASC"===t?"icon-sort-up":"icon-sort-down "+P.default.iconSortDown:"icon-sort "+P.default.iconSortDouble},rowClassName:function(e){var t=e.index;return t<0?P.default.headerRow:t%2==0?P.default.evenRow:P.default.oddRow},loadMoreRows:function(){var e=this;if(!this.state.loading){this.setState({loading:!0});var t=function(){return e.setState({loading:!1})};this.props.fetchNextPage().then(t).catch(t)}},rowGetter:function(e){var t=e.index;return this.props.tasks[t]},isRowLoaded:function(e){return e.index<this.props.tasks.length},renderColumns:function(){var e=this;return this.props.columns.map(function(t){var a=_.clone(t),s=B[t.dataKey];return s&&(a.cellRenderer=s),i.default.createElement(l.Column,(0,n.default)({},a,{headerRenderer:e.headerRenderer,minWidth:100,"data-qa-component":window.__DEBUG&&window.__DEBUG.qa&&"custom-apps/tasks-sheet/components/SheetContainer/Table"}))})},renderLoading:function(e){return i.default.createElement("div",{style:{width:e+"px"},className:P.default.loading+" animation__fade-in","data-qa-component":window.__DEBUG&&window.__DEBUG.qa&&"custom-apps/tasks-sheet/components/SheetContainer/Table"},Teambox.Lib.I18n.t("common.loading"))},render:function(){var e=this,t=this.props,a=t.tasks,s=t.totalRows;return i.default.createElement(l.InfiniteLoader,{rowCount:s,loadMoreRows:this.loadMoreRows,isRowLoaded:this.isRowLoaded,threshold:10,"data-qa-component":window.__DEBUG&&window.__DEBUG.qa&&"custom-apps/tasks-sheet/components/SheetContainer/Table"},function(t){var s=t.onRowsRendered,o=t.registerChild;return i.default.createElement(l.AutoSizer,{"data-qa-component":window.__DEBUG&&window.__DEBUG.qa&&"custom-apps/tasks-sheet/components/SheetContainer/Table"},function(t){var n=t.height,r=t.width;return i.default.createElement("div",{style:{height:"100%"},"data-qa-component":window.__DEBUG&&window.__DEBUG.qa&&"custom-apps/tasks-sheet/components/SheetContainer/Table"},i.default.createElement(l.Table,{ref:o,onRowsRendered:s,width:r,height:n,headerHeight:45,rowHeight:45,rowCount:a.length,rowGetter:e.rowGetter,sort:e.onSort,rowClassName:e.rowClassName,onRowClick:e.onRowClick,overscanRowCount:20,"data-qa-component":window.__DEBUG&&window.__DEBUG.qa&&"custom-apps/tasks-sheet/components/SheetContainer/Table"},e.renderColumns()),(0,p.default)(e.state.loading,e.renderLoading(r)))})})}}),e.exports=t.default},"./custom-apps/tasks-sheet/components/SheetContainer/Table/styles/index.scss":function(e,t,a){var s=a('./node_modules/css-loader/index.js?{"modules":true,"localIdentName":"[local]___[hash:base64:5]","importLoaders":2}!./node_modules/postcss-loader/lib/index.js!./node_modules/sass-loader/lib/loader.js?{"outputStyle":"expanded","sourceComments":true}!./custom-apps/tasks-sheet/components/SheetContainer/Table/styles/index.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;a("./node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"./custom-apps/tasks-sheet/components/SheetContainer/index.jsx":function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a("./node_modules/react/react.js"),n=s(o),r=a("./node_modules/react-redux/lib/index.js"),i=a("./node_modules/react-virtualized/dist/es/index.js"),l=a("./custom-apps/tasks-sheet/components/SheetContainer/Table/index.jsx"),u=s(l),d=a("./custom-apps/tasks-sheet/components/SheetContainer/Filters/index.jsx"),c=s(d),p=a("./custom-apps/tasks-sheet/components/SheetContainer/styles/index.scss"),m=s(p),f=Teambox.Helpers.t,h="custom_apps.sheets.column_labels",g=[{label:f(h+".name"),dataKey:"name",width:200,flexGrow:1},{label:f(h+".list"),dataKey:"task_list_id",width:110},{label:f(h+".workspace"),dataKey:"project_id",width:110},{label:f(h+".status"),dataKey:"status",width:70},{label:f(h+".assignees"),dataKey:"assigned_user_ids",width:70},{label:f(h+".start"),dataKey:"start_on",width:70},{label:f(h+".due_date"),dataKey:"due_on",width:70},{label:f(h+".creator"),dataKey:"user_id",width:70},{label:f(h+".updated"),dataKey:"updated_at",width:70},{label:f(h+".created"),dataKey:"created_at",width:70}],b=i.SortDirection.ASC,v=n.default.createClass({displayName:"SheetContainer",propTypes:{filters:n.default.PropTypes.object.isRequired,onChangeParams:n.default.PropTypes.func.isRequired,onClickTask:n.default.PropTypes.func.isRequired,fetchNextPage:n.default.PropTypes.func.isRequired,totalRows:n.default.PropTypes.number.isRequired,tasks:n.default.PropTypes.object.isRequired,users:n.default.PropTypes.object.isRequired,exportReport:n.default.PropTypes.object.isRequired},onSort:function(e){var t=e.sortBy,a=this.props.filters.sort_direction,s=a===i.SortDirection.ASC?i.SortDirection.DESC:i.SortDirection.ASC,o=t===this.props.filters.sort_by?s:b;this.props.onChangeParams({sort_by:t,sort_direction:o})},shouldRenderColumnWithKey:function(e){return _.contains(this.visibleColumnKeys(),e)},filterColumns:function(){var e=this;return g.filter(function(t){var a=t.dataKey;return e.shouldRenderColumnWithKey(a)})},visibleColumnKeys:function(){return _.pluck(g,"dataKey")},render:function(){return n.default.createElement("div",{className:m.default.sheet,"data-qa-component":window.__DEBUG&&window.__DEBUG.qa&&"custom-apps/tasks-sheet/components/SheetContainer"},n.default.createElement(c.default,{filters:this.props.filters,exportReport:this.props.exportReport,totalRows:this.props.totalRows,onChangeParams:this.props.onChangeParams,organizationId:this.props.filters.organization_id,"data-qa-component":window.__DEBUG&&window.__DEBUG.qa&&"custom-apps/tasks-sheet/components/SheetContainer"}),n.default.createElement("div",{className:m.default.tasksTable,"data-qa-component":window.__DEBUG&&window.__DEBUG.qa&&"custom-apps/tasks-sheet/components/SheetContainer"},n.default.createElement(u.default,{tasks:this.props.tasks,fetchNextPage:this.props.fetchNextPage,totalRows:this.props.totalRows,columns:this.filterColumns(),sortBy:this.props.filters.sort_by,sortDirection:this.props.filters.sort_direction,onSort:this.onSort,onClickTask:this.props.onClickTask,"data-qa-component":window.__DEBUG&&window.__DEBUG.qa&&"custom-apps/tasks-sheet/components/SheetContainer"})))}}),x=function(e,t){return{tasks:_.compact(t.taskIdsOrder.map(function(t){return e.tasks.by_id[t]}))}};t.default=(0,r.connect)(x)(v),e.exports=t.default},"./custom-apps/tasks-sheet/components/SheetContainer/styles/index.scss":function(e,t,a){var s=a('./node_modules/css-loader/index.js?{"modules":true,"localIdentName":"[local]___[hash:base64:5]","importLoaders":2}!./node_modules/postcss-loader/lib/index.js!./node_modules/sass-loader/lib/loader.js?{"outputStyle":"expanded","sourceComments":true}!./custom-apps/tasks-sheet/components/SheetContainer/styles/index.scss');"string"==typeof s&&(s=[[e.i,s,""]]);var o={};o.transform=void 0;a("./node_modules/style-loader/addStyles.js")(s,o);s.locals&&(e.exports=s.locals)},"./custom-apps/tasks-sheet/controller.js":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("./custom-apps/tasks-sheet/views/sheet/bridge.jsx"),o=function(e){return e&&e.__esModule?e:{default:e}}(s),n=Teambox.Lib.Dispatcher,r=Teambox.Lib.Middleware.stack,i={organization_id:{type:"Number"},project_id:{type:"Number"},assigned_user_id:{type:"Number"},user_id:{type:"Number"},tag_ids:{type:"String"},status:{type:"String"},sort_by:{type:"String",default:"updated_at"},sort_direction:{type:"String",default:"DESC"}},l={app:"tasks-sheet",initialize:function(){this.coordinator=new Teambox.Lib.Coordinator,this.collection=Teambox.Data.tasks,Teambox.MainLayout.trigger("main_layout:close_header")},indexAction:function(){this.prepareCoordinator();for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];Teambox.Apps.OnePaneController.prototype.indexAction.apply(this,t)},index:n(r([],function e(){this.indexAction(),e.next()})),show:n(r(["task_id"],function e(){this.indexAction(),e.next()})),contentPaneView:function(){return new o.default({coordinator:this.coordinator,collection:this.collection})},setDocumentTitle:function(){Teambox.Lib.DocumentTitle.set([this.model&&this.model.publicName(),Teambox.Lib.I18n.t("apps.my_tasks.title")])},shouldRefetch:function(){var e=this.should_refetch;return this.should_refetch=!1,e},allParams:function(){return _.keys(i)},getParam:function(e){var t=i[e];if(!t)return null;var a=this.params[e]||t.default;return"Number"!==t.type||_.isUndefined(a)?a:+a},reduceParams:function(){var e=this;return _.reduce(this.allParams(),function(t,a){var s=e.getParam(a);return _.isUndefined(s)?t:(t[a]=s,t)},{})},prepareCoordinator:function(){this.coordinator.set({filters:this.reduceParams()})},getLayout:function(){return new Teambox.Layouts.OnePane({content_class:"l-panes-content--transparent",no_subheader:!0})},getHeaderView:function(){return null},getSubHeader:function(){return null}};t.default=Teambox.Apps.OnePaneController.extend(l),e.exports=t.default},"./custom-apps/tasks-sheet/router.js":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("./custom-apps/tasks-sheet/routes.js"),o=function(e){return e&&e.__esModule?e:{default:e}}(s);t.default=Backbone.Marionette.AppRouter.extend({appRoutes:o.default}),e.exports=t.default},"./custom-apps/tasks-sheet/services/filters-to-api-params.js":function(e,t,a){"use strict";function s(e){switch(e){case"task_list_id":return"task_list_name";case"project_id":return"project_name";case"assigned_user_ids":return"assignee_name";case"start_on":return"schedule_start_date";case"due_on":return"schedule_end_date";case"user_id":return"creator_name";default:return e}}function o(e){var t=s(e.sort_by),a=e.sort_direction;return t&&a?{order:t+"-"+a}:{}}function n(e){return"unassigned"===e?{assigned:!1}:"number"==typeof e&&e?{assigned_user_id:e}:{}}function r(e){return e?{organization_id:e}:{}}function i(e){return e?{project_id:e}:{}}function l(e){return e?{user_id:e}:{}}function u(e){return"resolved"===e?{archived:"true"}:"open"===e?{archived:"false"}:{archived:"true,false"}}function d(e){return{tag_ids:e}}function c(e){return(0,_.default)({},n(e.assigned_user_id),r(e.organization_id),i(e.project_id),l(e.user_id),u(e.status),d(e.tag_ids))}function p(e){return(0,_.default)({},o(e),c(e))}Object.defineProperty(t,"__esModule",{value:!0});var m=a("./node_modules/babel-runtime/helpers/extends.js"),_=function(e){return e&&e.__esModule?e:{default:e}}(m);t.default=p,e.exports=t.default},"./custom-apps/tasks-sheet/views/sheet/bridge.jsx":function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a("./node_modules/babel-runtime/helpers/extends.js"),n=s(o),r=a("./node_modules/react/react.js"),i=s(r),l=a("./node_modules/react-redux/lib/index.js"),u=a("./app/future/lib/store-creator.js"),d=s(u),c=a("./app/future/lib/exportProjectTo.js"),p=s(c),m=a("./custom-apps/tasks-sheet/services/filters-to-api-params.js"),f=s(m),h=a("./app/javascripts/views/behaviors/with-react-component.js"),g=s(h),b=a("./custom-apps/tasks-sheet/components/SheetContainer/index.jsx"),v=s(b),x=a("./app/future/lib/streamFullItemWrapper.js"),w=s(x);t.default=Marionette.Layout.extend({className:"full-height",behaviors:function(){return{WithReactComponent:{behaviorClass:g.default,getReactComponent:this.getReactComponent.bind(this)}}},initialize:function(e){var t=e.collection,a=e.coordinator;this.collection=t,this.coordinator=a,this.paginatorReset(),_.bindAll(this,"fetchNextPage","onChangeParams","onClickTask","exportReport")},checkParamsRestrictions:function(e){var t=_.clone(e);return Teambox.Features.task_overview_status_filter||(t.archived=!1),t},paginatorReset:function(){var e=this,t=(0,f.default)(this.coordinator.get("filters")),a=this.checkParamsRestrictions(t),s=this.collection;s.reset([]),this.paginator=new Teambox.Lib.Paginator({collection:s,filter_params:a,per_page:30}),this.paginator.fetchFirstPage().then(function(t){return e.checkTaskListNames(t)}).then(function(){return e.render()})},fetchNextPage:function(){var e=this;return this.paginator.fetchNextPage().then(function(t){return e.checkTaskListNames(t)}).then(function(){return e.render()})},checkTaskListNames:function(e){var t=_.uniq(e.map(function(e){return e.task_list_id})),a=t.filter(function(e){return!Teambox.Data.task_lists.get(e)}),s=a.map(function(e){return new Teambox.Models.TaskList({id:e})}),o=s.map(function(e){return e.fetch()});return Promise.all(o).then(function(e){return Teambox.Data.task_lists.add(e)}).catch(function(){})},onChangeParams:function(e){var t=_.compactObject((0,n.default)({},this.coordinator.get("filters"),e)),a="#!/apps/tasks-sheet";_.isEmpty(t)||(a+="?"+$.param(t,!0)),Backbone.history.navigate(a,{trigger:!1}),this.coordinator.set({filters:t}),this.paginatorReset()},onClickTask:function(e){var t=this.collection.get(e);if(t){var a={type:"Task",current:t};(0,w.default)(a,t).open()}},exportReport:function(e){var t=(0,f.default)(this.coordinator.get("filters")),a=Teambox.Config.Vars.api_internal+"/tasks_overview_exports";(0,p.default)(a,(0,n.default)({},t,{format:e,per_page:this.paginator.totalEntries()+100}))},getReactComponent:function(){return i.default.createElement(l.Provider,{store:d.default,"data-qa-component":window.__DEBUG&&window.__DEBUG.qa&&"custom-apps/tasks-sheet/views/sheet/bridge"},i.default.createElement(v.default,{taskIdsOrder:this.collection.pluck("id"),totalRows:this.paginator.totalEntries()||0,fetchNextPage:this.fetchNextPage,onChangeParams:this.onChangeParams,onClickTask:this.onClickTask,filters:this.coordinator.get("filters"),exportReport:this.exportReport,"data-qa-component":window.__DEBUG&&window.__DEBUG.qa&&"custom-apps/tasks-sheet/views/sheet/bridge"}))}}),e.exports=t.default},"./custom-apps/time-tracking/collections/time-tracking-entries.js":function(e,t,a){"use strict";var s=a("./custom-apps/time-tracking/models/time-tracking-entry.js"),o={model:s};o.url=Teambox.Lib.UrlManager.resourceUrl("comments/time_tracking.json",["project_id","user_id","year","month"]),e.exports=Teambox.Collections.Base.extend(o)},"./custom-apps/time-tracking/controller.js":function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a("./custom-apps/time-tracking/collections/time-tracking-entries.js"),n=s(o),r=a("./custom-apps/time-tracking/views/content.js"),i=s(r),l=a("./app/future/lib/streamFullItemWrapper.js"),u=s(l),d=Teambox.Lib.Middleware.stack,c=Teambox.Lib.Dispatcher,p={app:"reporting",section:"time-tracking",simple_layout:!0,no_subheader:!0,initialize:function(){var e=["project_id","user_id","group_by","year","month"];this.coordinator=new Teambox.Lib.Coordinator({filters:e}),this.organizations=Teambox.Data.me.getNonExternalOrganizations(),Teambox.Data.tasks.fetch(),this.listenTo(this.coordinator,"change",this.persistFilters),this.should_redraw=!0,this.should_refetch=!0,Teambox.MainLayout.trigger("main_layout:close_header")},onClose:function(){this.should_redraw=!0,this.should_refetch=!0},shouldRedraw:function(){var e=this.should_redraw;return this.should_redraw=!1,e},shouldRefetch:function(){var e=this.should_refetch;return this.should_refetch=!1,e},contentPaneView:function(){return new i.default({collection:this.original_collection,coordinator:this.coordinator})},openTaskDialog:function(){var e=this;if(this.params.task_id){var t=this.original_collection.map(function(e){return Teambox.Models.Task.from2to3(e.rel("target"))}),a=new Teambox.Collections.Tasks(t),s=a.get(this.params.task_id);this.getModel(s).then(function(t){var s={type:"Task",collection:a,current:t,url_context:"time_tracking",url_options:e.coordinator.getFilterAttributes()},o=(0,u.default)(s,t);e.listenTo(o,"dialog:close",function(){Teambox.Lib.Refresh.navigate("#!/apps/reporting/time-tracking?"+e.coordinator.getFilterQueryString())}),o.open()})}},getModel:function(e){return new Promise(function(t){var a=Teambox.Data.tasks._byId[e.id];a&&t(a),e.fetch().then(function(e){return t(new Teambox.Models.Task(e))})})},persistFilters:function(){var e=this;this.should_redraw=!0,this.should_refetch=_.any(this.coordinator.get("filters"),function(t){return e.coordinator.hasChanged(t)}),Teambox.Lib.Refresh.navigate("#!/apps/reporting/time-tracking?"+this.coordinator.getFilterQueryString())},prepareCoordinator:function(){var e=+this.params.year||_.utc().year(),t=+this.params.month||_.utc().month()+1;this.coordinator.set({year:_.utc([e,t-1]).isValid()?e:_.utc().year(),month:_.utc([e,t-1]).isValid()?t:_.utc().month+1,collection:this.coordinator.get("collection")||new Teambox.Collections.Tasks,user_id:this.params.user_id,project_id:this.params.project_id,group_by:this.params.group_by||"target"},{silent:!0})},indexAction:function(){this.listenToOnce(this,"callback",this.openTaskDialog),this.prepareCoordinator(),Teambox.Apps.OnePaneController.prototype.indexAction.apply(this,arguments)},index:c(d([],function e(){this.prepareCoordinator(),this.indexAction(),e.next()})),show:c(d(["task_id"],function e(){this.prepareCoordinator(),this.indexAction(),e.next()})),fetchData:function(e){this.original_collection=new n.default,this.original_collection.url=this.original_collection.url({year:this.coordinator.get("year"),month:this.coordinator.get("month"),project_id:this.coordinator.get("project_id"),user_id:this.coordinator.get("user_id")}),this.original_collection.fetch({success:e,error:e})},setDocumentTitle:function(){Teambox.Lib.DocumentTitle.set([Teambox.Lib.I18n.t("apps.reporting.sections.time-tracking")])}};t.default=Teambox.Apps.OnePaneController.extend(p),e.exports=t.default},"./custom-apps/time-tracking/coordinator.js":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={getExportUrl:function(e){var t=void 0,a=void 0;return t="/export/time/"+this.get("year")+"/"+this.get("month"),t+="."+e,a=this.get("project_id"),a&&(a=Teambox.Data.projects.get(a),t+="?project_permalink="+encodeURIComponent(a.get("permalink"))),t}};t.default=s,e.exports=t.default},"./custom-apps/time-tracking/lib/time-tracking-groups.js":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={groupModel:function(e){return Backbone.Model.extend({initialize:function(t){this.set({id:t.id,targets:_.uniq(t.vc.map(_.f("rel",["target"]))),users:_.uniq(t.vc.map(_.f("rel",["user"]))),projects:_.uniq(t.vc.map(_.f("rel",["project"]))),group:e,hours:_.reduce(t.vc.map(_.f("get",["hours"])),_.add,0)})}})},getGroupedCollection:function(e){return Backbone.buildGroupedCollection({collection:e.collection,GroupModel:s.groupModel(e.field),groupBy:_.f("get",[e.field+"_id"]),close_with:e.close_with})},groupByWeekly:function(e){var t=_.utc(e,Teambox.Config.Vars.api_date_format),a={sunday:0,monday:1},s=Teambox.Data.me.get("first_day_of_week");return 0===t.day()&&"monday"===s&&(t=t.day(-1)),t=t.day(a[s]),t.format(Teambox.Config.Vars.api_date_format)},getWeeklyGroupedCollection:function(e){var t=this;return Backbone.buildGroupedCollection({collection:e.collection,GroupModel:s.groupModel(e.field,e.matchable_attr),close_with:e.close_with,groupBy:function(a){return t.groupByWeekly(a.get(e.matchable_attr))}})}};t.default=s,e.exports=t.default},"./custom-apps/time-tracking/models/time-tracking-entry.js":function(e,t,a){"use strict";var s={};s.belongsTo=function(){return{target:function(e){return new Teambox.Models.Task(e.get("task"))},project:Teambox.Data.projects,user:Teambox.Data.users}},e.exports=Teambox.Models.Base.extend(s)},"./custom-apps/time-tracking/register-url-for.js":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){Teambox.Lib.urlFor.register("time_tracking","task",function(e,t){var a="apps/reporting/time-tracking/tasks/"+e.get("id");return _.isEmpty(t)||(a+="?"+$.param(t,!0)),a}),Teambox.Lib.urlFor.register("time_tracking","project",function(e,t){var a="apps/reporting/time-tracking/projects/"+e.get("id");return _.isEmpty(t)||(a+="?"+$.param(t,!0)),a}),Teambox.Lib.urlFor.register("time_tracking","user",function(e,t){var a="apps/reporting/time-tracking/users/"+e.get("id");return _.isEmpty(t)||(a+="?"+$.param(t,!0)),a}),Teambox.Lib.urlFor.register("time_tracking","user",function(e,t){var a="apps/reporting/time-tracking/users/"+e.get("id");return _.isEmpty(t)||(a+="?"+$.param(t,!0)),a})},e.exports=t.default},"./custom-apps/time-tracking/router.js":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("./custom-apps/time-tracking/routes.js"),o=function(e){return e&&e.__esModule?e:{default:e}}(s);t.default=Backbone.Marionette.AppRouter.extend({appRoutes:o.default}),e.exports=t.default},"./custom-apps/time-tracking/templates/collapsable/index.js":function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a("./custom-apps/time-tracking/templates/collapsable/project.jade"),n=s(o),r=a("./custom-apps/time-tracking/templates/collapsable/target.jade"),i=s(r),l=a("./custom-apps/time-tracking/templates/collapsable/user.jade"),u=s(l);t.default={project:n.default,target:i.default,user:u.default},e.exports=t.default},"./custom-apps/time-tracking/templates/collapsable/project.jade":function(e,t,a){var s=a("./node_modules/jade/lib/runtime.js");e.exports=function(e){var t,a=[],o=e||{},n=o.model.get("vc"),r=n.first(),i=r.rel("target"),l=r.rel("project");return a.push((null==(t=o.partial("projects.color-pinned",{color:l.personalColor()}))?"":t)+"<a"+s.attr("href",o.urlFor(i,o.query_params,"time_tracking"),!0,!0)+' class="js-title-link calendar__item__element"><div class="tb-light-element-title">'+s.escape(null==(t=l.publicName())?"":t)+s.escape(null==(t=" (")?"":t)+'<span class="tb-light-element-extra bold text-color-blue">'+s.escape(null==(t=o.humanHours(o.model.get("hours")))?"":t)+"</span>"+s.escape(null==(t=")")?"":t)+'</div><div class="tb-light-element-extra">'+s.escape(null==(t=n.length)?"":t)+s.escape(null==(t=" ")?"":t)+s.escape(null==(t=o.tm(["activerecord.singular.task","activerecord.plural.task"],n.length))?"":t)+"</div></a>"),a.join("")}},"./custom-apps/time-tracking/templates/collapsable/target.jade":function(e,t,a){var s=a("./node_modules/jade/lib/runtime.js");e.exports=function(e){var t,a=[],o=e||{},n=o.model.get("vc"),r=n.first(),i=r.rel("target");return i.rel("project")&&a.push(null==(t=o.partial("projects.color-pinned",{color:i.rel("project").personalColor()}))?"":t),a.push("<a"+s.attr("href",o.urlFor(i,o.query_params,"time_tracking"),!0,!0)+' class="js-title-link calendar__item__element"><div class="tb-light-element-title">'+s.escape(null==(t=i.publicName())?"":t)+s.escape(null==(t=" (")?"":t)+'<span class="tb-light-element-extra bold text-color-blue">'+s.escape(null==(t=o.humanHours(o.model.get("hours")))?"":t)+"</span>"+s.escape(null==(t=")")?"":t)+"</div>"+(null==(t=o.partial("common._tags",{model:i,no_task_link:!0,small:!0}))?"":t)+'<div class="tb-light-element-extra">'+s.escape(null==(t=i.relResult("project","publicName"))?"":t)+s.escape(null==(t=" ")?"":t)+"&raquo;"+s.escape(null==(t=" ")?"":t)+s.escape(null==(t=i.relResult("task_list","publicName"))?"":t)+"</div></a>"),a.join("")}},"./custom-apps/time-tracking/templates/collapsable/user.jade":function(e,t,a){var s=a("./node_modules/jade/lib/runtime.js");e.exports=function(e){var t,a=[],o=e||{},n=o.model.get("vc"),r=n.first(),i=r.rel("user"),l=r.rel("target");return a.push("<a"+s.attr("href",o.urlFor(l,o.query_params,"time_tracking"),!0,!0)+' class="js-title-link calendar__item__element"><div class="tb-light-element-title">'+s.escape(null==(t=i.publicName())?"":t)+s.escape(null==(t=" (")?"":t)+'<span class="tb-light-element-extra bold text-color-blue">'+s.escape(null==(t=o.humanHours(o.model.get("hours")))?"":t)+"</span>"+s.escape(null==(t=")")?"":t)+'</div><div class="tb-light-element-extra">'+s.escape(null==(t=n.length)?"":t)+s.escape(null==(t=" ")?"":t)+s.escape(null==(t=o.tm(["activerecord.singular.task","activerecord.plural.task"],n.length))?"":t)+'</div></a><div class="calendar__item__meta">'+(null==(t=o.partial("common.avatar",{user:i,size:"small"}))?"":t)+"</div>"),a.join("")}},"./custom-apps/time-tracking/templates/content.jade":function(e,t,a){a("./node_modules/jade/lib/runtime.js");e.exports=function(e){var t=[];return t.push('<div class="card__header"><div class="card__header__left"><div class="js-projects card__header__el"></div><div class="js-users card__header__el"></div></div><div class="card__header__middle"><div class="js-month card__header__el"></div></div><div class="card__header__right"><div class="js-group card__header__el"></div><div class="js-export card__header__el"></div><button type="button" class="js-print card__header__el"><i tabindex="6" class="icon-print disabled"></i></button></div></div><div class="card__body"><div class="js-calendar"></div><div class="card__block"><div class="js-summary"></div></div></div>'),t.join("")}},"./custom-apps/time-tracking/templates/day-item.jade":function(e,t,a){var s=a("./node_modules/jade/lib/runtime.js");e.exports=function(e){var t,a=[],o=e||{};return a.push('<div class="calendar__date"><div class="calendar__date__day">'+s.escape(null==(t=o.item_date)?"":t)+'</div><ul class="js-elements-for-today calendar__items"></ul></div>'),a.join("")}},"./custom-apps/time-tracking/templates/empty.jade":function(e,t,a){var s=a("./node_modules/jade/lib/runtime.js");e.exports=function(e){var t,a=[],o=e||{};return a.push('<div class="tb-blank-slate-inner"><i class="tb-blank-slate-icon icon-time"></i><h2>'+s.escape(null==(t=o.t("time_tracking.blank_slate_left.title"))?"":t)+"</h2><h3>"+s.escape(null==(t=o.t("time_tracking.blank_slate_left.description"))?"":t)+"</h3></div>"),a.join("")}},"./custom-apps/time-tracking/templates/export-popover.jade":function(e,t,a){var s=a("./node_modules/jade/lib/runtime.js");e.exports=function(e){var t,a=[],o=e||{};return a.push("<a"+s.attr("href",o.coordinator.getExportUrl("csv"),!0,!0)+' class="tb-cmenu-list-item">'+s.escape(null==(t=o.t("common.download_csv"))?"":t)+"</a><a"+s.attr("href",o.coordinator.getExportUrl("xlsx"),!0,!0)+' class="tb-cmenu-list-item">'+s.escape(null==(t=o.t("common.download_xlsx"))?"":t)+"</a>"),a.join("")}},"./custom-apps/time-tracking/templates/group/_monthly-total.jade":function(e,t,a){var s=a("./node_modules/jade/lib/runtime.js");e.exports=function(e){var t,a=[],o=e||{};return a.push('<div class="tb-stream-narrow-header tb-stream-narrow-header-naked"><div class="tb-meta bold text-color-blue">'+s.escape(null==(t=o.humanHours(o.hours,!0))?"":t)+'</div><div class="tb-stream-narrow-header-inner">'+s.escape(null==(t=o.t("time_tracking.monthly_total"))?"":t)+"</div></div>"),a.join("")}},"./custom-apps/time-tracking/templates/group/index.js":function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a("./custom-apps/time-tracking/templates/group/item-project.jade"),n=s(o),r=a("./custom-apps/time-tracking/templates/group/item-target.jade"),i=s(r),l=a("./custom-apps/time-tracking/templates/group/item-user.jade"),u=s(l),d=a("./custom-apps/time-tracking/templates/group/list-project.jade"),c=s(d),p=a("./custom-apps/time-tracking/templates/group/list-target.jade"),m=s(p),_=a("./custom-apps/time-tracking/templates/group/list-user.jade"),f=s(_);t.default={item_project:n.default,item_target:i.default,item_user:u.default,list_project:c.default,list_target:m.default,list_user:f.default},e.exports=t.default},"./custom-apps/time-tracking/templates/group/item-project.jade":function(e,t,a){var s=a("./node_modules/jade/lib/runtime.js");e.exports=function(e){var t,a=[],o=e||{},n=o.model.get("projects")[0];return a.push('<td><span class="js-title-link tt-summary__element">'+s.escape(null==(t=n.publicName())?"":t)+"</span></td><td>"),function(){var e=o.model.get("users");if("number"==typeof e.length)for(var s=0,n=e.length;s<n;s++){var r=e[s];a.push(null==(t=o.partial("common.avatar",{user:r,size:"small",mention_link:!0}))?"":t)}else{var n=0;for(var s in e){n++;var r=e[s];a.push(null==(t=o.partial("common.avatar",{user:r,size:"small",mention_link:!0}))?"":t)}}}.call(this),a.push("</td><td>"+s.escape(null==(t=o.humanHours(o.model.get("hours")))?"":t)+"</td>"),a.join("")}},"./custom-apps/time-tracking/templates/group/item-target.jade":function(e,t,a){var s=a("./node_modules/jade/lib/runtime.js");e.exports=function(e){var t,a=[],o=e||{},n=o.model.get("targets")[0];return a.push("<td><a"+s.attr("href",o.urlFor(n,o.query_params,"time_tracking"),!0,!0)+' class="js-title-link tt-summary__element">'+s.escape(null==(t=n.publicName())?"":t)+s.escape(null==(t=" ")?"":t)+'</a><span class="tt-summary__tags">'+(null==(t=o.partial("common._tags",{model:n}))?"":t)+"</span></td><td>"),function(){var e=o.model.get("users");if("number"==typeof e.length)for(var s=0,n=e.length;s<n;s++){var r=e[s];a.push(null==(t=o.partial("common.avatar",{user:r,size:"small"}))?"":t)}else{var n=0;for(var s in e){n++;var r=e[s];a.push(null==(t=o.partial("common.avatar",{user:r,size:"small"}))?"":t)}}}.call(this),a.push("</td><td>"+s.escape(null==(t=o.humanHours(o.model.get("hours")))?"":t)+"</td>"),a.join("")}},"./custom-apps/time-tracking/templates/group/item-user.jade":function(e,t,a){var s=a("./node_modules/jade/lib/runtime.js");e.exports=function(e){var t,a=[],o=e||{},n=o.model.get("users")[0];return a.push("<td>"+(null==(t=o.partial("common.avatar",{user:n,size:"small"}))?"":t)+'<span class="js-title-link tt-summary__element">'+s.escape(null==(t=n.publicName())?"":t)+"</span></td><td>"+s.escape(null==(t=o.tm(["time_tracking.total_task","time_tracking.total_tasks"],o.model.get("targets").length))?"":t)+s.escape(null==(t=" ")?"":t)+'<span class="disabled">'+s.escape(null==(t=o.tm(["time_tracking.total_project","time_tracking.total_projects"],o.model.get("projects").length))?"":t)+"</span></td><td>"+s.escape(null==(t=o.humanHours(o.model.get("hours")))?"":t)+"</td>"),a.join("")}},"./custom-apps/time-tracking/templates/group/list-project.jade":function(e,t,a){var s=a("./node_modules/jade/lib/runtime.js");e.exports=function(e){var t,a=[],o=e||{};return a.push((null==(t=o.partial(o.monthly_total_template,o))?"":t)+"<table><thead><tr><th>"+s.escape(null==(t=o.t("activerecord.singular.project"))?"":t)+"</th><th>"+s.escape(null==(t=o.t("activerecord.plural.user"))?"":t)+"</th><th>"+s.escape(null==(t=o.t("time_tracking.total_time"))?"":t)+'</th></tr></thead><tbody class="js-task-container"></tbody></table>'),a.join("")}},"./custom-apps/time-tracking/templates/group/list-target.jade":function(e,t,a){var s=a("./node_modules/jade/lib/runtime.js");e.exports=function(e){var t,a=[],o=e||{};return a.push((null==(t=o.partial(o.monthly_total_template,o))?"":t)+"<table><thead><tr><th>"+s.escape(null==(t=o.t("activerecord.singular.task"))?"":t)+"</th><th>"+s.escape(null==(t=o.t("activerecord.plural.user"))?"":t)+"</th><th>"+s.escape(null==(t=o.t("time_tracking.total_time"))?"":t)+'</th></tr></thead><tbody class="js-task-container"></tbody></table>'),a.join("")}},"./custom-apps/time-tracking/templates/group/list-user.jade":function(e,t,a){var s=a("./node_modules/jade/lib/runtime.js");e.exports=function(e){var t,a=[],o=e||{};return a.push((null==(t=o.partial(o.monthly_total_template,o))?"":t)+"<table><thead><tr><th>"+s.escape(null==(t=o.t("activerecord.singular.user"))?"":t)+"</th><th>"+s.escape(null==(t=o.t("activerecord.plural.task"))?"":t)+"</th><th>"+s.escape(null==(t=o.t("time_tracking.total_time"))?"":t)+'</th></tr></thead><tbody class="js-task-container"></tbody></table>'),a.join("")}},"./custom-apps/time-tracking/templates/list-empty.jade":function(e,t,a){a("./node_modules/jade/lib/runtime.js");e.exports=function(e){var t=[];return t.push('<div class="js-task-container"></div>'),t.join("")}},"./custom-apps/time-tracking/templates/summary-item.jade":function(e,t,a){var s=a("./node_modules/jade/lib/runtime.js");e.exports=function(e){var t,a=[],o=e||{};return a.push('<div class="js-container calendar__date calendar__date--summary">'),o.show_label&&a.push('<div class="calendar__date__day">'+s.escape(null==(t=o.t("time_tracking.weekly_totals"))?"":t)+"</div>"),a.push('<ul class="js-elements-for-summary calendar__items"></ul></div>'),a.join("")}},"./custom-apps/time-tracking/views/collapsable-item.js":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("./custom-apps/time-tracking/templates/collapsable/index.js"),o=function(e){return e&&e.__esModule?e:{default:e}}(s),n={className:"calendar__item",tagName:"li",events:{click:"onClick"},getTemplate:function(){return o.default[this.options.coordinator.get("group")]},serializeData:function(){return{model:this.model,query_params:this.options.coordinator.get("query_params")}},onClick:function(e){Teambox.Views.Modules.itemClick(this,e)}};t.default=Marionette.ItemView.extend(n),e.exports=t.default},"./custom-apps/time-tracking/views/content.js":function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a("./node_modules/babel-runtime/helpers/extends.js"),n=s(o),r=a("./app/javascripts/views/components/month-selector.js"),i=s(r),l=a("./app/javascripts/views/calendar/list.js"),u=s(l),d=a("./custom-apps/time-tracking/lib/time-tracking-groups.js"),c=s(d),p=a("./custom-apps/time-tracking/views/day-item.js"),m=s(p),f=a("./custom-apps/time-tracking/views/summary-item.js"),h=s(f),g=a("./custom-apps/time-tracking/views/list.js"),b=s(g),v=a("./custom-apps/time-tracking/templates/content.jade"),x=s(v),w=a("./custom-apps/time-tracking/coordinator.js"),j=s(w),k=(0,n.default)({},Teambox.Lib.ComponentManagerStatic),y=(0,n.default)({template:x.default,className:"card card--full card--with-header",regions:{calendar:".js-calendar",summary:".js-summary",month:".js-month",projects:".js-projects",users:".js-users",group:".js-group",export:".js-export"},events:{"click .js-print":"onPrint"}},Teambox.Lib.ComponentManager,Teambox.Views.Mixins.withPrint,{initialize:function(){this.coordinator=this.options.coordinator,this.coordinator=_.extend(this.coordinator,j.default),this.initializeComponents(),this.once("before:render",this.initializeSubviews,this)},initializeSubviews:function(){var e=c.default.getGroupedCollection({collection:this.collection,field:this.coordinator.get("group_by"),close_with:this}),t=c.default.getWeeklyGroupedCollection({collection:this.collection,field:this.coordinator.get("group_by"),matchable_attr:"time_tracking_at",close_with:this});this.subviews={},this.subviews.calendar=new u.default({month:this.coordinator.get("month"),year:this.coordinator.get("year"),collection:this.collection,dayItemView:m.default,summaryRowView:h.default,matchable_attr:"time_tracking_at",collapse_threshold:3,classes:"calendar calendar--summary",extra:{weeks_collection:t,group:this.coordinator.get("group_by"),query_params:this.coordinator.getFilterAttributes()}}),this.subviews.summary=new b.default({collection:e,coordinator:this.coordinator})},onRender:function(){this.calendar.show(this.subviews.calendar),this.summary.show(this.subviews.summary)},onSelectDate:function(e){this.coordinator.set(e)},onSelectGroup:function(e){this.coordinator.set({group_by:e})},onChangeFilter:function(){this.coordinator.set(this.getComponentData())}});k.addComponent({name:"month-selector",component:i.default,region:"month",componentParameters:function(e){return{tabindex:1,date:_.utc([e.coordinator.get("year"),e.coordinator.get("month")-1])}},serializeData:_.identity,events:{select:"onSelectDate"}}),k.addComponent({name:"projects-filter",component:Teambox.Views.Components.Popover.ProjectSelector,region:"projects",componentParameters:function(e){return{multiple:!1,none:!0,none_label:Teambox.Lib.I18n.t("calendar.all_projects"),button_label:Teambox.Lib.I18n.t("calendar.all_projects"),groupLabel:function(e){return e?"pinned"===e?Teambox.Lib.I18n.t("navigation.favorite_projects"):_.tryout(Teambox.Data.organizations.get(e),_.f("get",["name"])):null},selected_ids:[e.coordinator.get("project_id")],button_class:"button button-select button-middle"}},serializeData:function(e){return{project_id:e}},events:{select:"onChangeFilter"}}),k.addComponent({name:"user_select",component:Teambox.Views.Components.Popover.Selector,region:"users",componentParameters:function(e){return{collection:Teambox.Data.me.networkUsers(),comparator:Teambox.Models.User.buildComparator(),title:Teambox.Lib.I18n.t("components.popover.selector.users.title"),icon:"icon-user",none:!0,none_label:Teambox.Lib.I18n.t("calendar.all_users"),button_label:Teambox.Lib.I18n.t("calendar.all_users"),item_template:"components.popover.selector.users-list-item",selected_ids:[e.coordinator.get("user_id")],parent_wrapper:".js-content",button_class:"button button-select button-middle"}},serializeData:function(e){return{user_id:e}},events:{select:"onChangeFilter"}}),k.addComponent({name:"group-by",component:Teambox.Views.Components.Popover.SimpleSelector,region:"group",componentParameters:function(e){var t={target:Teambox.Helpers.t("time_tracking.header.view_by",{name:Teambox.Helpers.t("activerecord.singular.task")}),user:Teambox.Helpers.t("time_tracking.header.view_by",{name:Teambox.Helpers.t("activerecord.singular.user")}),project:Teambox.Helpers.t("time_tracking.header.view_by",{name:Teambox.Helpers.t("activerecord.singular.project")})};return{options_hash:t,button_label:t[e.coordinator.get("group_by")],selected_ids:[e.coordinator.get("group_by")],button_class:"button button-middle button-select",placement:"bottom-right",compact:!0,multiple:!1}},events:{select:"onSelectGroup"}}),k.addComponent({name:"export-button",component:Teambox.Views.Components.Popover.ActionMenu,region:"export",componentParameters:function(e){return{content_template:a("./custom-apps/time-tracking/templates/export-popover.jade"),button_template:"components.popover.button",button_label:Teambox.Helpers.t("common.export"),button_class:"button button-middle button-select",placement:"bottom-right",project:Teambox.params.project,coordinator:e.coordinator,tabindex:4}}}),t.default=Backbone.Marionette.Layout.extend(y,k),e.exports=t.default},"./custom-apps/time-tracking/views/day-item.js":function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a("./app/future/lib/class-name-builder/index.js"),n=s(o),r=a("./custom-apps/time-tracking/views/collapsable-item.js"),i=s(r),l=a("./custom-apps/time-tracking/templates/day-item.jade"),u=s(l),d={template:u.default,tagName:"td",itemView:i.default,itemViewContainer:".js-elements-for-today",initialize:function(){var e=this;this.coordinator=this.options.coordinator;var t=this.coordinator.get("matchable_attr");this.collection=new Backbone.VirtualCollection(this.coordinator.get("collection"),{filter:function(a){return a.get(t)===e.model.get("date").format(Teambox.Config.Vars.api_date_format)},close_with:this});var a=this.coordinator.get("group");this.collection=Backbone.buildGroupedCollection({collection:this.collection,GroupModel:d.groupModel(),groupBy:_.f("get",[a+"_id"]),close_with:this}),this.listenTo(this.collection,"add change remove",this.render)},className:function(){return(0,n.default)("calendar__cell",this.isToday()&&"calendar__cell--today",this.isOutdated()&&"calendar__cell--outdated")},isToday:function(){return this.model.get("date").isSame(new Date,"day")},isOutdated:function(){var e=this.options.coordinator,t=e.get("month")-1;return this.model.get("date").month()!==t},groupModel:function(){return Backbone.Model.extend({initialize:function(e){this.set({id:e.id,hours:_.reduce(e.vc.map(_.f("get",["hours"])),_.add,0)})}})},itemViewOptions:function(){return{coordinator:this.coordinator}},serializeData:function(){var e=this.coordinator.get("month")-1,t=this.model.get("date"),a=this.options.index,s=Teambox.Lib.Calendar.getDayFormat(t,a,e);return{item_date:this.model.get("date").format(s)}}};t.default=Backbone.Marionette.CompositeView.extend(d),e.exports=t.default},"./custom-apps/time-tracking/views/empty.js":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("./custom-apps/time-tracking/templates/empty.jade"),o=function(e){return e&&e.__esModule?e:{default:e}}(s),n={template:o.default,className:"tb-blank-slate tb-blank-slate--transparent"};t.default=Backbone.Marionette.ItemView.extend(n),e.exports=t.default},"./custom-apps/time-tracking/views/item.js":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("./custom-apps/time-tracking/templates/group/index.js"),o=function(e){return e&&e.__esModule?e:{default:e}}(s),n={className:"",tagName:"tr",events:{click:"onClick"},getTemplate:function(){return o.default["item_"+this.model.get("group")]},serializeData:function(){return{model:this.model,query_params:this.options.coordinator.getFilterAttributes()}},onClick:function(e){if("target"===this.model.get("group")){$(e.target).hasClass("tb-avatar")||Teambox.Views.Modules.itemClick(this,e)}}};t.default=Marionette.CompositeView.extend(n),e.exports=t.default},"./custom-apps/time-tracking/views/list.js":function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a("./custom-apps/time-tracking/views/item.js"),n=s(o),r=a("./custom-apps/time-tracking/views/empty.js"),i=s(r),l=a("./custom-apps/time-tracking/templates/group/_monthly-total.jade"),u=s(l),d=a("./custom-apps/time-tracking/templates/list-empty.jade"),c=s(d),p=a("./custom-apps/time-tracking/templates/group/index.js"),m=s(p),f={itemViewContainer:".js-task-container",itemView:n.default,emptyView:i.default,initialize:function(){this.listenTo(Teambox.vent,"sdk:leftPaneSelect",this.selectItem)},className:function(){var e=this.options.collection.at(0);return e&&"target"===e.get("group")?"tt-summary tt-summary--clickable":"tt-summary"},itemViewOptions:function(){return{coordinator:this.options.coordinator}},selectItem:function(e){Teambox.Views.Modules.selectItem(this,e)},serializeData:function(){var e=void 0,t=this.collection.models;return t.length&&(e=_.reduce(_.map(t,_.f("get",["hours"])),_.add,0)),{hours:e,monthly_total_template:u.default}},getTemplate:function(){var e=this.collection.at(0);return e?m.default["list_"+e.get("group")]:c.default}};t.default=Marionette.CompositeView.extend(f),e.exports=t.default},"./custom-apps/time-tracking/views/summary-item.js":function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a("./custom-apps/time-tracking/views/collapsable-item.js"),n=s(o),r=a("./custom-apps/time-tracking/templates/summary-item.jade"),i=s(r),l={template:i.default,className:"calendar__cell",tagName:"td",itemViewContainer:".js-elements-for-summary",itemView:n.default,initialize:function(){this.coordinator=this.options.coordinator;var e=this.coordinator.get("group"),t=_.first(this.options.model.attributes.week_days),a=this.coordinator.get("weeks_collection"),s=a&&a.get(t);this.collection=s?Backbone.buildGroupedCollection({collection:s.vc,GroupModel:l.groupModel(),groupBy:_.f("get",[e+"_id"]),close_with:this}):new Backbone.Collection,this.listenTo(this.collection,"add change remove",this.render)},groupModel:function(){return Backbone.Model.extend({initialize:function(e){this.set({id:e.id,hours:_.reduce(e.vc.map(_.f("get",["hours"])),_.add,0)})}})},itemViewOptions:function(){return{coordinator:this.coordinator}},serializeData:function(){return{model:this.model,show_label:8===this.options.index}}};t.default=Backbone.Marionette.CompositeView.extend(l),e.exports=t.default},'./node_modules/babel-loader/lib/index.js?{"presets":["react","es2015","stage-0"],"plugins":["transform-flow-strip-types","react-element-info","lodash",["transform-runtime",{"polyfill":false,"regenerator":false,"helpers":true}],"add-module-exports"],"cacheDirectory":true}!./custom-apps/tasks-sheet/loader.js':function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a("./custom-apps/tasks-sheet/router.js"),n=s(o),r=a("./custom-apps/tasks-sheet/controller.js"),i=s(r);t.default=function(){new n.default({controller:i.default.prototype})},e.exports=t.default},'./node_modules/babel-loader/lib/index.js?{"presets":["react","es2015","stage-0"],"plugins":["transform-flow-strip-types","react-element-info","lodash",["transform-runtime",{"polyfill":false,"regenerator":false,"helpers":true}],"add-module-exports"],"cacheDirectory":true}!./custom-apps/time-tracking/loader.js':function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a("./custom-apps/time-tracking/router.js"),n=s(o),r=a("./custom-apps/time-tracking/controller.js"),i=s(r),l=a("./custom-apps/time-tracking/register-url-for.js"),u=s(l);t.default=function(){new n.default({controller:i.default.prototype}),(0,u.default)()},e.exports=t.default},'./node_modules/css-loader/index.js?{"modules":true,"localIdentName":"[local]___[hash:base64:5]","importLoaders":2}!./node_modules/postcss-loader/lib/index.js!./node_modules/sass-loader/lib/loader.js?{"outputStyle":"expanded","sourceComments":true}!./custom-apps/tasks-sheet/components/SheetContainer/Filters/TagsFilter/styles/index.scss':function(e,t,a){t=e.exports=a("./node_modules/css-loader/lib/css-base.js")(void 0),t.push([e.i,"/* line 2, stdin */\n.container_disabled___3kxwB {\n  opacity: 0.5;\n  cursor: normal;\n}\n\n/* line 8, stdin */\n.filter___Z9IOb {\n  width: 190px;\n  padding-left: 10px;\n  max-height: 36px;\n  overflow: visible;\n  display: flex;\n  align-items: center;\n  color: #333;\n}\n\n/* line 17, stdin */\n.filter___Z9IOb > div {\n  position: relative;\n  top: -1px;\n  max-height: 36px;\n}\n",""]),t.locals={container_disabled:"container_disabled___3kxwB",filter:"filter___Z9IOb"}},'./node_modules/css-loader/index.js?{"modules":true,"localIdentName":"[local]___[hash:base64:5]","importLoaders":2}!./node_modules/postcss-loader/lib/index.js!./node_modules/sass-loader/lib/loader.js?{"outputStyle":"expanded","sourceComments":true}!./custom-apps/tasks-sheet/components/SheetContainer/Filters/styles/index.scss':function(e,t,a){t=e.exports=a("./node_modules/css-loader/lib/css-base.js")(void 0),t.push([e.i,"/**\n * Colors\n *\n * Colors used in redbooth\n *\n * Styleguide Colors\n */\n/* line 3, stdin */\n.filters___3lB3o {\n  flex: 0 1 auto;\n  display: flex;\n  margin: 0 auto;\n  padding: 15px 0;\n  width: 100%;\n  flex-direction: column;\n}\n\n/* line 12, stdin */\n.filtersRow___1bwep {\n  display: inline-flex;\n  flex-direction: row;\n  margin-bottom: 10px;\n}\n\n/* line 18, stdin */\n.rightFilters___1lUJW {\n  flex: 1 0 auto;\n  text-align: right;\n  margin-top: -30px;\n  color: #777;\n  font-weight: 600;\n}\n\n/* line 25, stdin */\n.rightFilters___1lUJW a {\n  font-style: italic;\n  font-weight: 400;\n}\n\n/* line 31, stdin */\n.exportWrapper___2cEF7 {\n  margin-left: 10px;\n  display: inline-block;\n}\n\n/* line 34, stdin */\n.exportWrapper___2cEF7 > div {\n  display: inline-block;\n}\n\n@media only screen and (min-width: 1180px) {\n  /* line 40, stdin */\n  .filters___3lB3o {\n    flex-direction: row;\n  }\n  /* line 44, stdin */\n  .rightFilters___1lUJW {\n    margin: 28px 0 0 2px;\n  }\n}\n",""]),t.locals={filters:"filters___3lB3o",filtersRow:"filtersRow___1bwep",rightFilters:"rightFilters___1lUJW",exportWrapper:"exportWrapper___2cEF7"}},'./node_modules/css-loader/index.js?{"modules":true,"localIdentName":"[local]___[hash:base64:5]","importLoaders":2}!./node_modules/postcss-loader/lib/index.js!./node_modules/sass-loader/lib/loader.js?{"outputStyle":"expanded","sourceComments":true}!./custom-apps/tasks-sheet/components/SheetContainer/Table/styles/index.scss':function(e,t,a){t=e.exports=a("./node_modules/css-loader/lib/css-base.js")(void 0),t.push([e.i,"/**\n * Colors\n *\n * Colors used in redbooth\n *\n * Styleguide Colors\n */\n/* line 4, stdin */\n.ReactVirtualized__Table__sortableHeaderColumn {\n  cursor: default;\n  height: 100%;\n}\n\n/* line 10, stdin */\n.headerRow___2HIax,\n.evenRow___3Iq8e,\n.oddRow___cWtX9 {\n  border-bottom: 1px solid #d6d6d6;\n  white-space: nowrap;\n  font-size: 11px;\n}\n\n/* line 18, stdin */\n.evenRow___3Iq8e,\n.oddRow___cWtX9 {\n  cursor: default;\n}\n\n/* line 22, stdin */\n.evenRow___3Iq8e:hover,\n.oddRow___cWtX9:hover {\n  background-color: #ecebfd;\n}\n\n/* line 27, stdin */\n.oddRow___cWtX9 {\n  background-color: #f2f5f6;\n}\n\n/* line 31, stdin */\n.customHeader___3T4Zo {\n  color: #444;\n  display: flex;\n  align-items: center;\n  height: 100%;\n  white-space: normal;\n  overflow-wrap: break-word;\n  hyphens: auto;\n}\n\n/* line 40, stdin */\n.customHeader___3T4Zo.sortable___38RJL:hover {\n  color: gray;\n}\n\n/* line 45, stdin */\n.isSorting___1P5Q2 {\n  color: #6579e3;\n}\n\n/* line 49, stdin */\n.iconSort___2qOd5 {\n  display: flex;\n  flex: 1 auto;\n  margin-left: 5px;\n  height: 8px;\n}\n\n/* line 55, stdin */\n.iconSort___2qOd5.iconSortDown___1KgkP {\n  height: 18px;\n}\n\n/* line 59, stdin */\n.iconSort___2qOd5.iconSortDouble___3gGyz {\n  height: 14px;\n}\n\n/* line 66, stdin */\n.loading___3BBuw {\n  position: relative;\n  padding: 10px;\n  top: -20px;\n  text-align: center;\n  background-color: white;\n}\n\n/* line 74, stdin */\n.tagsWrapper___k7onb {\n  display: inline-block;\n  margin-left: 5px;\n}\n\n/* line 79, stdin */\n.urgentWrapper___18xQZ {\n  display: inline-block;\n  margin-right: 4px;\n  vertical-align: middle;\n  height: 16px;\n}\n",""]),t.locals={headerRow:"headerRow___2HIax",evenRow:"evenRow___3Iq8e",oddRow:"oddRow___cWtX9",customHeader:"customHeader___3T4Zo",sortable:"sortable___38RJL",isSorting:"isSorting___1P5Q2",iconSort:"iconSort___2qOd5",iconSortDown:"iconSortDown___1KgkP",iconSortDouble:"iconSortDouble___3gGyz",loading:"loading___3BBuw",tagsWrapper:"tagsWrapper___k7onb",urgentWrapper:"urgentWrapper___18xQZ"}},'./node_modules/css-loader/index.js?{"modules":true,"localIdentName":"[local]___[hash:base64:5]","importLoaders":2}!./node_modules/postcss-loader/lib/index.js!./node_modules/sass-loader/lib/loader.js?{"outputStyle":"expanded","sourceComments":true}!./custom-apps/tasks-sheet/components/SheetContainer/styles/index.scss':function(e,t,a){t=e.exports=a("./node_modules/css-loader/lib/css-base.js")(void 0),t.push([e.i,"/**\n * Colors\n *\n * Colors used in redbooth\n *\n * Styleguide Colors\n */\n/* line 5, stdin */\n.sheet___2Qxsv {\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  margin: 0 20px;\n  overflow: hidden;\n}\n\n/* line 13, stdin */\n.tasksTable___2Kl0f {\n  max-width: 100%;\n  margin: 0 auto;\n  flex: 1 1 auto;\n  height: 100%;\n  background: white;\n  width: 100%;\n  padding: 8px;\n  margin-bottom: 10px;\n  border-radius: 5px;\n  overflow: hidden;\n}\n\n/* line 26, stdin */\ndiv {\n  outline: none;\n}\n",""]),t.locals={sheet:"sheet___2Qxsv",tasksTable:"tasksTable___2Kl0f"}}});
//# sourceMappingURL=ebb1b6da05b66002de5f.js.map